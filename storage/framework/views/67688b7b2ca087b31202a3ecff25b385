<?php $__env->startSection('style'); ?>
<link href="<?php echo asset('plugins/datatables/dataTables.bootstrap.css'); ?> "rel="stylesheet" type="text/css"/>    
<link href="<?php echo asset('plugins/sweet-alert/sweet-alert.css'); ?> "rel="stylesheet" type="text/css"/>
<link href="<?php echo asset('css/jquery-ui.css'); ?> "rel="stylesheet" type="text/css"/>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('content'); ?>
<section class="content">
<div class="row">
	<div class="col-xs-12">
		<div class="box">
			<div class="box-header">
				<div class="row">
					<div class="col-xs-6">
						<h3 class="box-title"><?php echo $title; ?></h3>
					</div>
					<div class="col-xs-6">
						<div class="pull-right">
							<a href="<?php echo url(GLobalHelp::indexUrl().'/create'); ?>" data-original-title="Add" data-toggle="tooltip" class="btn btn-primary">
								<i class="fa fa-plus"></i> History Pembelian
							</a>
						</div>
					</div>
				</div>
			</div><!-- /.box-header -->
			<div class="box-body">
				<?php if(Session::has('message')): ?>
					<?php echo GlobalHelp::messages(Session::get('message'), true); ?>

				<?php endif; ?>
				<div class="row">
					<div class="col-md-6">
						<div class="box box-solid">
							<div class="box-header with-border">
								<i class="fa fa-text-width"></i>
								<h3 class="box-title">Data Supplier</h3>
							</div><!-- /.box-header -->
							<div class="box-body">
								<div class="form-group">
									<label for="name_supplier" class="control-label">Nama Supplier</label>
									<div class="input-group input-group-sm">
										<input type="text" name="supplier" id="supplier" class="form-control">
										<span class="input-group-btn">
										  <button class="btn btn-info btn-flat" type="button"><i class="fa fa-search"></i></button>
										</span>
										<input type="hidden" id="id_supplier" value="">
									</div>
								</div>
								<div class="form-group">
									<label for="address" class="control-label">Alamat</label>
									<input class="form-control" name="address" type="text" id="address" readonly="true">
								</div>
								<div class="form-group">
									<div class="row">
										<div class="col-xs-6">
											<label for="no_telp" class="control-label">No Telp</label>
										  	<input type="text" name="telp" id="telp" class="form-control" placeholder="No Telp" readonly="true">
										</div>
										<div class="col-xs-6">
											<label for="email" class="control-label">Email</label>
										  	<input type="text" id="email" name="email" class="form-control" placeholder="email" readonly="true">
										</div>
									</div>
								</div>
							</div>
						</div><!-- /.box -->
					</div>
					<div class="col-md-6">
						<div class="box box-solid">
							<div class="box-header with-border">
								<i class="fa fa-text-width"></i>
								<h3 class="box-title">Pembayaran</h3>
							</div><!-- /.box-header -->
							<div class="box-body">
								<div class="form-group">
									<label for="ekpedisi" class="control-label">Ekpedisi</label>
									<input class="form-control" name="ekpedisi" type="text" id="ekpedisi">
								</div>	
								<div class="form-group">
									<label for="ekpedisi" class="control-label">Tanggal Transaksi</label>
									<label class="form-control"><?= date('d F Y') ?></label>
								</div>		
								<div class="form-group">
									<label for="name_category" class="control-label">Total Pembayaran</label><br/>
									<label id="total" class="control-label">8988</label>
								</div>
							</div><!-- /.box-body -->
						</div><!-- /.box -->
					</div>
					<div class="col-md-12">
						<div class="box box-solid">
							<div class="box">
								<div class="box-header">
									<div class="col-md-6">
										<div class="pull-left">
											<div class="input-group input-group-sm" style="margin-left: -20px;width: 67%;">
												<input type="text" name="item" id="item" class="form-control">
												<span class="input-group-btn">
												 	<button class="btn btn-info btn-flat" type="button"><i class="fa fa-search"></i></button>
												</span>
											</div>
										</div>
									</div>
									<div class="col-md-6">
										<div class="pull-right">
											<h3 class="box-title">Daftar Barang</h3>
										</div>
									</div>
								</div><!-- /.box-header -->
								<div class="box-body no-padding">
									<table class="table table-condensed">
										<tbody>
										<tr>
										  <th style="width: 10px">#</th>
										  <th>Nama Barang</th>
										  <th>QTY</th>
										  <th>Harga Beli</th>
										  <!-- <th>Harga Jual</th> -->
										  <th>Sub Total</th>
										  <th style="width: 40px">Aksi</th>
										</tr>
										<tr>

										</tr>
										</tbody>
									</table>
								</div><!-- /.box-body -->
							</div>

						</div><!-- /.box -->
					</div>
				</div>
			</div><!-- /.box-body -->
		</div><!-- /.box -->
	</div><!-- /.col -->
</div><!-- /.row -->
</section>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('script'); ?> 
<script src="<?php echo asset('plugins/sweet-alert/sweet-alert.js'); ?> " type="text/javascript"></script>    
<script src="<?php echo asset('js/alert.js'); ?> " type="text/javascript"></script>    

<script type="text/javascript">
    $( document ).on( "click", ".delete_item", function( e ) {
        var jwb = confirm('Yakin Menghapus Item ini ? ');
        if(jwb){
            $(this).parent().fadeOut('slow', function() {
                $(this).parent().remove();
            });
        }else{
            alert('batal dihapus');
        }
    });   

    $(function() {
        $( "#supplier" ).autocomplete({
           	source: "<?php echo url(GLobalHelp::indexUrl().'/suppliers'); ?>",
          	focus: function( event, ui ) {
            	$( "#supplier" ).val(ui.item.name_company);
            	return false;
	        },
	        select: function( event, ui ) {
	          	$("#id_supplier").val(ui.item.supplier_id);
	          	$("#address").val(ui.item.address);
	          	$("#telp").val(ui.item.telp);
	          	$("#email").val(ui.item.email);

	            return false;
	        }
        })
        .data( "ui-autocomplete" )._renderItem = function( ul, item ) {
          return $( "<li>" )
            .append( "<a><strong>" + item.name_company + " | "+ item.website + "</strong><br>" + item.email +"</a>" )
            .appendTo( ul );
        };

        $( "#item" ).autocomplete({
           	source: "<?php echo url(GLobalHelp::indexUrl().'/items'); ?>",
          	focus: function( event, ui ) {
            	return false;
	        },
	        select: function( event, ui ) {
	            $("table tbody").append($('<tr id="item_'+ui.item.id+'">'+
	            				'<td>#</td>'+
	            				'<td>'+ui.item.name_items+'</td>'+
	            				'<td><input type="number" min="0" id="qty" value="0" class="form-control" /></td>'+
	            				'<td><input type="number" min="0" id="price-buy" value="0" class="form-control" /></td>'+
	            				// '<td><input type="number" min="0" id="price-sell" value="0" class="form-control" /></td>'+
	            				'<td>klklk</td>'+
	                            '<td class="hidden-350"><a rel="tooltip" class="delete_item" title="Hapus Barang" data-original-title="Delete"><button class="btn btn-danger"><i class="fa fa-trash"></i></button></a></td>'+
	                        '</tr>').show('slow'));

	            return false;
	        }
        })
        .data( "ui-autocomplete" )._renderItem = function( ul, item ) {
          return $( "<li>" )
            .append( "<a><strong>" + item.name_items +"</strong></a>" )
            .appendTo( ul );
        };

    });
</script>
<?php $__env->stopSection(); ?>

<?php echo $__env->make('main', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>